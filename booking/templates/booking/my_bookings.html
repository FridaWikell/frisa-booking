{% extends 'base.html' %}
{% load static %}

{% block content %}
{% if messages %} 
    {% for message in messages %}
        {% if 'edit_booking' in message.tags %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endif %}
    {% endfor %}
{% endif %}

<div class="row mx-3 md-mx-5 justify-content-center">
    <h2 class="text-center mt-3">{{ user }}'s booked workshops</h2>
</div>
<div class="row justify-content-center">
    <hr class="col-8 mt-2 mt-md-3">
</div>
<div class="row col-10 col-md-6 justify-content-center mx-auto">
    <p>
        We're thrilled to announce that we've successfully gathered all 
        the workshops you've booked with us. Every session has been 
        carefully organized and is awaiting your participation. 
        This personalized collection is designed to ensure you 
        have a seamless and enriching experience.
    </p>
</div>
<div class="row col-10 justify-content-center mx-auto">
    {% if bookings %}
        {% for booking in bookings %}
        <div class="col-sm-4 my-3 mx-3 px-3 py-4 text-center my-bookings">
            <h5 class="pb-3">{{ booking.course_session.course.name }}</h5> 
            <p>{{ booking.course_session.start_time|date:"j F Y" }}</p>
            <p>{{ booking.course_session.start_time|time:"H.i" }} - {{ booking.course_session.end_time|time:"H.i" }}</p>
            <!-- Edit Button -->
            <div class="d-flex justify-content-center stick-to-bottom">
                <a href="{% url 'edit_booking' booking.id %}" class="btn btn-secondary me-2">Edit</a>
                <!-- Inline Form for Deletion -->
                <form action="{% url 'delete_booking' booking.id %}" method="post" onsubmit="return confirmDelete();">
                    {% csrf_token %}
                    <input type="hidden" name="booking_id" value="{{ booking.id }}">
                    <button type="submit" class="btn delete-btn">Cancel</button>
                </form>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="col-sm-4 my-3 mx-3 px-3 py-4 text-center">
            <h5>Oopsie daisy!</h5>
            <p>It seems like you haven't booked any workshops yet.</p>
            <p>May I present the wonderful booking page?</p>
            <a href="{% url 'booking' %}" class="btn take-me-btn me-2">Take me there!</a>
        </div>
    {% endif %}
</div>
<div class="row justify-content-center">
    <hr class="col-8 mt-4">
</div>
{% endblock content %}

{% block script %}
<script src="{% static 'js/delete_booking.js' %}"></script>
{% endblock script %}